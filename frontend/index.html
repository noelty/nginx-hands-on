<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hobbies API Integration</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    ul { list-style-type: none; padding: 0; }
    li { margin: 5px 0; }
    input, button { padding: 8px; margin: 5px; }
  </style>
</head>
<body>
  <h1>Hobbies List</h1>
  <ul id="hobbiesList"></ul>

  <h2>Add a Hobby</h2>
  <input type="text" id="hobbyInput" placeholder="Enter hobby">
  <button onclick="addHobby()">Add Hobby</button>

  <script>
    const apiBaseUrl = 'http://127.0.0.1:8000' 
    // Function to fetch and display hobbies
    function fetchHobbies() {
    fetch(`${apiBaseUrl}/api/hobbies`)
    .then(response => response.json())
    .then(data => {
        const list = document.getElementById('hobbiesList');
        list.innerHTML = ''; // clear any previous items
        Object.entries(data).forEach(([key, value]) => {
            const li = document.createElement('li');
            li.textContent = value;
            list.appendChild(li);
        });
    })
    .catch(error => console.error('Error fetching hobbies:', error));
    }

    // Function to add a hobby
    function addHobby() {
      const hobby = document.getElementById('hobbyInput').value.trim();
      if (!hobby) return;

      fetch(`${apiBaseUrl}/api/add-hobby`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ hobby: hobby })
      })
        .then(response => {
          if (!response.ok) throw new Error('Network response was not ok');
          return response.json();
        })
        .then(() => {
          document.getElementById('hobbyInput').value = '';
          fetchHobbies(); // Refresh list after adding
        })
        .catch(error => console.error('Error adding hobby:', error));
    }

    // Fetch hobbies on page load
    fetchHobbies();
  </script>
</body>
</html>
